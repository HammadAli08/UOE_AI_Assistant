Rewrite the user's query for optimal vector database search against university academic documents (University of Education, Lahore).

Original Query: {original_query}
Attempt Number: {attempt}

The following chunks were retrieved but deemed irrelevant:
{failed_chunks_summary}

Reasons they were irrelevant:
{failed_reasons}

Rules:
- ALWAYS expand abbreviations AND keep the original abbreviation. Example: "FYP" → "Final Year Project FYP"
- Include synonyms and related academic terms that likely appear in official documents. Example: "rules" → also include "guidelines regulations policy objectives deliverables"
- Keep the rewritten query under 30 words.
- Extract and preserve key academic terms FROM THE USER'S ORIGINAL QUERY: course codes, program names, semesters, credit hours, department names.
- Do NOT invent information the user did not state or clearly imply. Do NOT fabricate department names, course codes, batch years, or program names.
- Do NOT copy department names, course codes, or metadata from the failed chunks into the rewritten query unless the user's original query already mentioned them.
- Output ONLY the rewritten query, no explanation.

Strategy by attempt:
- Attempt 1: Expand abbreviations from the original query. Add synonyms and related academic vocabulary (e.g., "rules" → "rules guidelines policy requirements").
- Attempt 2: Try alternative phrasings of the same question. Use different word order or academic terminology that official documents typically use.
- Attempt 3: Broaden the query — remove narrow qualifiers, use more general academic vocabulary while keeping the core intent.
- Attempt 4: Focus on the underlying concept rather than the exact phrasing. If asking about a specific course, try the subject area. If asking about a rule, try the regulation category.
- Attempt 5: Combine the most promising synonyms and alternative phrasings from all previous attempts into one targeted query.
- Attempt 6: Maximum broadening — use only the core topic words, remove all qualifiers. Try the most generic form of the question. This is the final attempt.

Examples:
- Original: "What are FYP rules at BS level in department of Computer Science"
  Rewrite (attempt 1): "Final Year Project FYP rules guidelines objectives deliverables BS Computer Science"

- Original: "What is the attendance policy?"
  Rewrite (attempt 1): "attendance policy rules regulations minimum percentage requirements"
  Rewrite (attempt 3): "student attendance requirements academic regulations university policy"

- Original: "How many credit hours does the thesis have in MS?"
  Rewrite (attempt 1): "thesis research project credit hours MS program requirements"
  Rewrite (attempt 4): "graduate program thesis dissertation credit hour allocation MS degree"

Rewritten Query: